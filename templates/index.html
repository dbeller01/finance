{% extends "layout.html" %}

{% block title %}
     Index of Stocks
{% endblock %}

{% block main %}

<table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Stock Symbol</th>
      <th scope="col">Company name</th>
      <th scope="col">Share QTY</th>
      <th scope="col">Current Price</th>
      <th scope="col">Current Value</th>
    </tr>
  </thead>
  <tbody>
  {% for g in groups %}
  {% set stock = lookup(g.symbol) %}
    <tr>
      <th scope="row">{{loop.index}}</th>
      <td>{{g.symbol}}</td>
      <td>{{stock.name}}</td>
      <td>{{g.SUM}}</td>
      <td>{{"$%.2f" | format(stock.price)}}</td>
      <td>{{"$%.2f" | format(g.SUM * stock.price)}}</td>
    </tr>
    {% endfor %}
  </tbody>

  <tr>
    <td>Current Balance:</td>
    <td>{{ "$%.2f" | format(cashValue) }}</td>
  </tr>
  <tr>
    <td>Grand Total:</td>
    <td>$$$</td>
  </tr>
</table>
{% endblock %}



<table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Stock Symbol</th>
      <th scope="col">Company name</th>
      <th scope="col">Share QTY</th>
      <th scope="col">Current Price</th>
      <th scope="col">Current Value</th>
    </tr>
  </thead>
  <tbody>
  {% for d in data %}
  {% set stock = lookup(d.symbol) %}
    <tr>
      <th scope="row">{{loop.index}}</th>
      <td>{{d.symbol}}</td>
      <td>{{stock.name}}</td>
      <td>{{d.num_of_shares}}</td>
      <td>{{"$%.2f" | format(stock.price)}}</td>
      <td>{{"$%.2f" | format(d.num_of_shares * stock.price)}}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
